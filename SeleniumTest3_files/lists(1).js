"use strict";goog.provide("Blockly.JavaScript.lists");goog.require("Blockly.JavaScript");Blockly.JavaScript.lists_create_empty=function(){return["[]",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.lists_create_with=function(){var a=new Array(this.itemCount_);for(var b=0;b<this.itemCount_;b++){a[b]=Blockly.JavaScript.valueToCode(this,"ADD"+b,Blockly.JavaScript.ORDER_COMMA)||"null"}a="["+a.join(", ")+"]";return[a,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.lists_repeat=function(){if(!Blockly.JavaScript.definitions_.lists_repeat){var d=Blockly.JavaScript.variableDB_.getDistinctName("lists_repeat",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.lists_repeat.repeat=d;var b=[];b.push("function "+d+"(value, n) {");b.push("  var array = [];");b.push("  for (var i = 0; i < n; i++) {");b.push("    array[i] = value;");b.push("  }");b.push("  return array;");b.push("}");Blockly.JavaScript.definitions_.lists_repeat=b.join("\n")}var e=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_COMMA)||"null";var c=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_COMMA)||"0";var a=Blockly.JavaScript.lists_repeat.repeat+"("+e+", "+c+")";return[a,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists_length=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''";return[a+".length",Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.lists_isEmpty=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";return["!"+a+".length",Blockly.JavaScript.ORDER_LOGICAL_NOT]};Blockly.JavaScript.lists_indexOf=function(){var a=this.getTitleValue("END")=="FIRST"?"indexOf":"lastIndexOf";var d=Blockly.JavaScript.valueToCode(this,"FIND",Blockly.JavaScript.ORDER_NONE)||"''";var c=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";var b=c+"."+a+"("+d+") + 1";return[b,Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.lists_getIndex=function(){var g=this.getTitleValue("MODE")||"GET";var b=this.getTitleValue("WHERE")||"FROM_START";var a=Blockly.JavaScript.valueToCode(this,"AT",Blockly.JavaScript.ORDER_UNARY_NEGATION)||"1";var f=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";if(b=="FIRST"){if(g=="GET"){var d=f+"[0]";return[d,Blockly.JavaScript.ORDER_MEMBER]}else{if(g=="GET_REMOVE"){var d=f+".shift()";return[d,Blockly.JavaScript.ORDER_MEMBER]}else{if(g=="REMOVE"){return f+".shift();\n"}}}}else{if(b=="LAST"){if(g=="GET"){var d=f+".slice(-1)[0]";return[d,Blockly.JavaScript.ORDER_MEMBER]}else{if(g=="GET_REMOVE"){var d=f+".pop()";return[d,Blockly.JavaScript.ORDER_MEMBER]}else{if(g=="REMOVE"){return f+".pop();\n"}}}}else{if(b=="FROM_START"){if(a.match(/^-?\d+$/)){a=parseInt(a,10)-1}else{a+=" - 1"}if(g=="GET"){var d=f+"["+a+"]";return[d,Blockly.JavaScript.ORDER_MEMBER]}else{if(g=="GET_REMOVE"){var d=f+".splice("+a+", 1)[0]";return[d,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else{if(g=="REMOVE"){return f+".splice("+a+", 1);\n"}}}}else{if(b=="FROM_END"){if(g=="GET"){var d=f+".slice(-"+a+")[0]";return[d,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else{if(g=="GET_REMOVE"||g=="REMOVE"){if(!Blockly.JavaScript.definitions_.lists_remove_from_end){var e=Blockly.JavaScript.variableDB_.getDistinctName("lists_remove_from_end",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.lists_getIndex.lists_remove_from_end=e;var c=[];c.push("function "+e+"(list, x) {");c.push("  x = list.length - x;");c.push("  return list.splice(x, 1)[0];");c.push("}");Blockly.JavaScript.definitions_.lists_remove_from_end=c.join("\n")}d=Blockly.JavaScript.lists_getIndex.lists_remove_from_end+"("+f+", "+a+")";if(g=="GET_REMOVE"){return[d,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else{if(g=="REMOVE"){return d+";\n"}}}}}else{if(b=="RANDOM"){if(!Blockly.JavaScript.definitions_.lists_get_random_item){var e=Blockly.JavaScript.variableDB_.getDistinctName("lists_get_random_item",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.lists_getIndex.random=e;var c=[];c.push("function "+e+"(list, remove) {");c.push("  var x = Math.floor(Math.random() * list.length);");c.push("  if (remove) {");c.push("    return list.splice(x, 1)[0];");c.push("  } else {");c.push("    return list[x];");c.push("  }");c.push("}");Blockly.JavaScript.definitions_.lists_get_random_item=c.join("\n")}d=Blockly.JavaScript.lists_getIndex.random+"("+f+", "+(g!="GET")+")";if(g=="GET"||g=="GET_REMOVE"){return[d,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else{if(g=="REMOVE"){return d+";\n"}}}}}}}throw"Unhandled combination (lists_getIndex)."};Blockly.JavaScript.lists_setIndex=function(){var g=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]";var h=this.getTitleValue("MODE")||"GET";var d=this.getTitleValue("WHERE")||"FROM_START";var a=Blockly.JavaScript.valueToCode(this,"AT",Blockly.JavaScript.ORDER_NONE)||"1";var f=Blockly.JavaScript.valueToCode(this,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"null";function b(){if(g.match(/^\w+$/)){return""}var i=Blockly.JavaScript.variableDB_.getDistinctName("tmp_list",Blockly.Variables.NAME_TYPE);var j="var "+i+" = "+g+";\n";g=i;return j}if(d=="FIRST"){if(h=="SET"){return g+"[0] = "+f+";\n"}else{if(h=="INSERT"){return g+".unshift("+f+");\n"}}}else{if(d=="LAST"){if(h=="SET"){var e=b();e+=g+"["+g+".length - 1] = "+f+";\n";return e}else{if(h=="INSERT"){return g+".push("+f+");\n"}}}else{if(d=="FROM_START"){if(a.match(/^\d+$/)){a=parseInt(a,10)-1}else{a+=" - 1"}if(h=="SET"){return g+"["+a+"] = "+f+";\n"}else{if(h=="INSERT"){return g+".splice("+a+", 0, "+f+");\n"}}}else{if(d=="FROM_END"){var e=b();if(h=="SET"){e+=g+"["+g+".length - "+a+"] = "+f+";\n";return e}else{if(h=="INSERT"){e+=g+".splice("+g+".length - "+a+", 0, "+f+");\n";return e}}}else{if(d=="RANDOM"){var e=b();var c=Blockly.JavaScript.variableDB_.getDistinctName("tmp_x",Blockly.Variables.NAME_TYPE);e+="var "+c+" = Math.floor(Math.random() * "+g+".length);\n";if(h=="SET"){e+=g+"["+c+"] = "+f+";\n";return e}else{if(h=="INSERT"){e+=g+".splice("+c+", 0, "+f+");\n";return e}}}}}}}throw"Unhandled combination (lists_setIndex)."};