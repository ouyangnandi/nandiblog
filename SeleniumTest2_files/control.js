"use strict";goog.provide("Blockly.Language.control");goog.require("Blockly.Language");Blockly.Language.controls_if={helpUrl:Blockly.LANG_CONTROLS_IF_HELPURL,init:function(){this.setColour(120);this.appendValueInput("IF0").setCheck(Boolean).appendTitle(Blockly.LANG_CONTROLS_IF_MSG_IF);this.appendStatementInput("DO0").appendTitle(Blockly.LANG_CONTROLS_IF_MSG_THEN);this.setPreviousStatement(true);this.setNextStatement(true);this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var a=this;this.setTooltip(function(){if(!a.elseifCount_&&!a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_1}else{if(!a.elseifCount_&&a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_2}else{if(a.elseifCount_&&!a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_3}else{if(a.elseifCount_&&a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_4}}}}return""});this.elseifCount_=0;this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_){return null}var a=document.createElement("mutation");if(this.elseifCount_){a.setAttribute("elseif",this.elseifCount_)}if(this.elseCount_){a.setAttribute("else",1)}return a},domToMutation:function(b){this.elseifCount_=window.parseInt(b.getAttribute("elseif"),10);this.elseCount_=window.parseInt(b.getAttribute("else"),10);for(var a=1;a<=this.elseifCount_;a++){this.appendValueInput("IF"+a).setCheck(Boolean).appendTitle(Blockly.LANG_CONTROLS_IF_MSG_ELSEIF);this.appendStatementInput("DO"+a).appendTitle(Blockly.LANG_CONTROLS_IF_MSG_THEN)}if(this.elseCount_){this.appendStatementInput("ELSE").appendTitle(Blockly.LANG_CONTROLS_IF_MSG_ELSE)}},decompose:function(e){var b=new Blockly.Block(e,"controls_if_if");b.initSvg();var d=b.getInput("STACK").connection;for(var a=1;a<=this.elseifCount_;a++){var c=new Blockly.Block(e,"controls_if_elseif");c.initSvg();d.connect(c.previousConnection);d=c.nextConnection}if(this.elseCount_){var f=new Blockly.Block(e,"controls_if_else");f.initSvg();d.connect(f.previousConnection)}return b},compose:function(b){if(this.elseCount_){this.removeInput("ELSE")}this.elseCount_=0;for(var a=this.elseifCount_;a>0;a--){this.removeInput("IF"+a);this.removeInput("DO"+a)}this.elseifCount_=0;var f=b.getInputTargetBlock("STACK");while(f){switch(f.type){case"controls_if_elseif":this.elseifCount_++;var e=this.appendValueInput("IF"+this.elseifCount_).setCheck(Boolean).appendTitle(Blockly.LANG_CONTROLS_IF_MSG_ELSEIF);var d=this.appendStatementInput("DO"+this.elseifCount_);d.appendTitle(Blockly.LANG_CONTROLS_IF_MSG_THEN);if(f.valueConnection_){e.connection.connect(f.valueConnection_)}if(f.statementConnection_){d.connection.connect(f.statementConnection_)}break;case"controls_if_else":this.elseCount_++;var c=this.appendStatementInput("ELSE");c.appendTitle(Blockly.LANG_CONTROLS_IF_MSG_ELSE);if(f.statementConnection_){c.connection.connect(f.statementConnection_)}break;default:throw"Unknown block type."}f=f.nextConnection&&f.nextConnection.targetBlock()}},saveConnections:function(c){var e=c.getInputTargetBlock("STACK");var b=1;while(e){switch(e.type){case"controls_if_elseif":var a=this.getInput("IF"+b);var d=this.getInput("DO"+b);e.valueConnection_=a&&a.connection.targetConnection;e.statementConnection_=d&&d.connection.targetConnection;b++;break;case"controls_if_else":var d=this.getInput("ELSE");e.statementConnection_=d&&d.connection.targetConnection;break;default:throw"Unknown block type."}e=e.nextConnection&&e.nextConnection.targetBlock()}}};Blockly.Language.controls_if_if={init:function(){this.setColour(120);this.appendDummyInput().appendTitle(Blockly.LANG_CONTROLS_IF_IF_TITLE_IF);this.appendStatementInput("STACK");this.setTooltip(Blockly.LANG_CONTROLS_IF_IF_TOOLTIP);this.contextMenu=false}};Blockly.Language.controls_if_elseif={init:function(){this.setColour(120);this.appendDummyInput().appendTitle(Blockly.LANG_CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_CONTROLS_IF_ELSEIF_TOOLTIP);this.contextMenu=false}};Blockly.Language.controls_if_else={init:function(){this.setColour(120);this.appendDummyInput().appendTitle(Blockly.LANG_CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(true);this.setTooltip(Blockly.LANG_CONTROLS_IF_ELSE_TOOLTIP);this.contextMenu=false}};Blockly.Language.controls_repeat={helpUrl:Blockly.LANG_CONTROLS_REPEAT_HELPURL,init:function(){this.setColour(120);this.appendDummyInput().appendTitle(Blockly.LANG_CONTROLS_REPEAT_TITLE_REPEAT).appendTitle(new Blockly.FieldTextInput("10",Blockly.FieldTextInput.nonnegativeIntegerValidator),"TIMES").appendTitle(Blockly.LANG_CONTROLS_REPEAT_TITLE_TIMES);this.appendStatementInput("DO").appendTitle(Blockly.LANG_CONTROLS_REPEAT_INPUT_DO);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_CONTROLS_REPEAT_TOOLTIP)}};Blockly.Language.controls_whileUntil={helpUrl:Blockly.LANG_CONTROLS_WHILEUNTIL_HELPURL,init:function(){this.setColour(120);this.appendValueInput("BOOL").setCheck(Boolean).appendTitle(Blockly.LANG_CONTROLS_WHILEUNTIL_TITLE_REPEAT).appendTitle(new Blockly.FieldDropdown(this.OPERATORS),"MODE");this.appendStatementInput("DO").appendTitle(Blockly.LANG_CONTROLS_WHILEUNTIL_INPUT_DO);this.setPreviousStatement(true);this.setNextStatement(true);var a=this;this.setTooltip(function(){var b=a.getTitleValue("MODE");return a.TOOLTIPS[b]})}};Blockly.Language.controls_whileUntil.OPERATORS=[[Blockly.LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE,"WHILE"],[Blockly.LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,"UNTIL"]];Blockly.Language.controls_whileUntil.TOOLTIPS={WHILE:Blockly.LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,UNTIL:Blockly.LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL};Blockly.Language.controls_for={helpUrl:Blockly.LANG_CONTROLS_FOR_HELPURL,init:function(){this.setColour(120);this.appendDummyInput().appendTitle(Blockly.LANG_CONTROLS_FOR_INPUT_WITH).appendTitle(new Blockly.FieldVariable(null),"VAR");this.appendValueInput("FROM").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendTitle(Blockly.LANG_CONTROLS_FOR_INPUT_FROM);this.appendValueInput("TO").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendTitle(Blockly.LANG_CONTROLS_FOR_INPUT_TO);this.appendStatementInput("DO").appendTitle(Blockly.LANG_CONTROLS_FOR_INPUT_DO);this.setPreviousStatement(true);this.setNextStatement(true);this.setInputsInline(true);var a=this;this.setTooltip(function(){return Blockly.LANG_CONTROLS_FOR_TOOLTIP.replace("%1",a.getTitleValue("VAR"))})},getVars:function(){return[this.getTitleValue("VAR")]},renameVar:function(b,a){if(Blockly.Names.equals(b,this.getTitleValue("VAR"))){this.setTitleValue(a,"VAR")}},customContextMenu:function(b){var c={enabled:true};var a=this.getTitleValue("VAR");c.text=Blockly.LANG_VARIABLES_SET_CREATE_GET.replace("%1",a);c.callback=Blockly.ContextMenu.callbackFactory(this,"variables_get","VAR",a);b.push(c)}};Blockly.Language.controls_forEach={helpUrl:Blockly.LANG_CONTROLS_FOREACH_HELPURL,init:function(){this.setColour(120);this.appendValueInput("LIST").setCheck(Array).appendTitle(Blockly.LANG_CONTROLS_FOREACH_INPUT_ITEM).appendTitle(new Blockly.FieldVariable(null),"VAR").appendTitle(Blockly.LANG_CONTROLS_FOREACH_INPUT_INLIST);this.appendStatementInput("DO").appendTitle(Blockly.LANG_CONTROLS_FOREACH_INPUT_DO);this.setPreviousStatement(true);this.setNextStatement(true);var a=this;this.setTooltip(function(){return Blockly.LANG_CONTROLS_FOREACH_TOOLTIP.replace("%1",a.getTitleValue("VAR"))})},getVars:function(){return[this.getTitleValue("VAR")]},renameVar:function(b,a){if(Blockly.Names.equals(b,this.getTitleValue("VAR"))){this.setTitleValue(a,"VAR")}},customContextMenu:function(b){var c={enabled:true};var a=this.getTitleValue("VAR");c.text=Blockly.LANG_VARIABLES_SET_CREATE_GET.replace("%1",a);c.callback=Blockly.ContextMenu.callbackFactory(this,"variables_get","VAR",a);b.push(c)}};Blockly.Language.controls_flow_statements={helpUrl:Blockly.LANG_CONTROLS_FLOW_STATEMENTS_HELPURL,init:function(){this.setColour(120);var b=new Blockly.FieldDropdown(this.OPERATORS);this.appendDummyInput().appendTitle(b,"FLOW").appendTitle(Blockly.LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP);this.setPreviousStatement(true);var a=this;this.setTooltip(function(){var c=a.getTitleValue("FLOW");return a.TOOLTIPS[c]})},onchange:function(){if(!this.workspace){return}var a=false;var b=this;do{if(b.type=="controls_repeat"||b.type=="controls_forEach"||b.type=="controls_for"||b.type=="controls_whileUntil"){a=true;break}b=b.getSurroundParent()}while(b);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.LANG_CONTROLS_FLOW_STATEMENTS_WARNING)}}};Blockly.Language.controls_flow_statements.OPERATORS=[[Blockly.LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,"BREAK"],[Blockly.LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,"CONTINUE"]];Blockly.Language.controls_flow_statements.TOOLTIPS={BREAK:Blockly.LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,CONTINUE:Blockly.LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE};