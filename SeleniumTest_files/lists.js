"use strict";goog.provide("Blockly.Language.lists");goog.require("Blockly.Language");Blockly.Language.lists_create_empty={helpUrl:Blockly.LANG_LISTS_CREATE_EMPTY_HELPURL,init:function(){this.setColour(210);this.setOutput(true,Array);this.appendDummyInput().appendTitle(Blockly.LANG_LISTS_CREATE_EMPTY_TITLE);this.setTooltip(Blockly.LANG_LISTS_CREATE_EMPTY_TOOLTIP)}};Blockly.Language.lists_create_with={helpUrl:"",init:function(){this.setColour(210);this.appendValueInput("ADD0").appendTitle(Blockly.LANG_LISTS_CREATE_WITH_INPUT_WITH);this.appendValueInput("ADD1");this.appendValueInput("ADD2");this.setOutput(true,Array);this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip(Blockly.LANG_LISTS_CREATE_WITH_TOOLTIP);this.itemCount_=3},mutationToDom:function(b){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(b){for(var a=0;a<this.itemCount_;a++){this.removeInput("ADD"+a)}this.itemCount_=window.parseInt(b.getAttribute("items"),10);for(var a=0;a<this.itemCount_;a++){var c=this.appendValueInput("ADD"+a);if(a==0){c.appendTitle(Blockly.LANG_LISTS_CREATE_WITH_INPUT_WITH)}}if(this.itemCount_==0){this.appendDummyInput("EMPTY").appendTitle(Blockly.LANG_LISTS_CREATE_EMPTY_TITLE)}},decompose:function(e){var c=new Blockly.Block(e,"lists_create_with_container");c.initSvg();var d=c.getInput("STACK").connection;for(var b=0;b<this.itemCount_;b++){var a=new Blockly.Block(e,"lists_create_with_item");a.initSvg();d.connect(a.previousConnection);d=a.nextConnection}return c},compose:function(c){if(this.itemCount_==0){this.removeInput("EMPTY")}else{for(var b=this.itemCount_-1;b>=0;b--){this.removeInput("ADD"+b)}}this.itemCount_=0;var a=c.getInputTargetBlock("STACK");while(a){var d=this.appendValueInput("ADD"+this.itemCount_);if(this.itemCount_==0){d.appendTitle(Blockly.LANG_LISTS_CREATE_WITH_INPUT_WITH)}if(a.valueConnection_){d.connection.connect(a.valueConnection_)}this.itemCount_++;a=a.nextConnection&&a.nextConnection.targetBlock()}if(this.itemCount_==0){this.appendDummyInput("EMPTY").appendTitle(Blockly.LANG_LISTS_CREATE_EMPTY_TITLE)}},saveConnections:function(c){var b=c.getInputTargetBlock("STACK");var a=0;while(b){var d=this.getInput("ADD"+a);b.valueConnection_=d&&d.connection.targetConnection;a++;b=b.nextConnection&&b.nextConnection.targetBlock()}}};Blockly.Language.lists_create_with_container={init:function(){this.setColour(210);this.appendDummyInput().appendTitle(Blockly.LANG_LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);this.appendStatementInput("STACK");this.setTooltip(Blockly.LANG_LISTS_CREATE_WITH_CONTAINER_TOOLTIP);this.contextMenu=false}};Blockly.Language.lists_create_with_item={init:function(){this.setColour(210);this.appendDummyInput().appendTitle(Blockly.LANG_LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_LISTS_CREATE_WITH_ITEM_TOOLTIP);this.contextMenu=false}};Blockly.Language.lists_repeat={helpUrl:Blockly.LANG_LISTS_REPEAT_HELPURL,init:function(){this.setColour(210);this.setOutput(true,Array);this.appendValueInput("ITEM").appendTitle(Blockly.LANG_LISTS_REPEAT_INPUT_WITH);this.appendValueInput("NUM").setCheck(Number).appendTitle(Blockly.LANG_LISTS_REPEAT_INPUT_REPEATED);this.appendDummyInput().appendTitle(Blockly.LANG_LISTS_REPEAT_INPUT_TIMES);this.setInputsInline(true);this.setTooltip(Blockly.LANG_LISTS_REPEAT_TOOLTIP)}};Blockly.Language.lists_length={helpUrl:Blockly.LANG_LISTS_LENGTH_HELPURL,init:function(){this.setColour(210);this.appendValueInput("VALUE").setCheck([Array,String]).appendTitle(Blockly.LANG_LISTS_LENGTH_INPUT_LENGTH);this.setOutput(true,Number);this.setTooltip(Blockly.LANG_LISTS_LENGTH_TOOLTIP)}};Blockly.Language.lists_isEmpty={helpUrl:Blockly.LANG_LISTS_IS_EMPTY_HELPURL,init:function(){this.setColour(210);this.appendValueInput("VALUE").setCheck([Array,String]);this.appendDummyInput().appendTitle(Blockly.LANG_LISTS_INPUT_IS_EMPTY);this.setInputsInline(true);this.setOutput(true,Boolean);this.setTooltip(Blockly.LANG_LISTS_TOOLTIP)}};Blockly.Language.lists_indexOf={helpUrl:Blockly.LANG_LISTS_INDEX_OF_HELPURL,init:function(){this.setColour(210);this.setOutput(true,Number);this.appendValueInput("VALUE").setCheck(Array).appendTitle(Blockly.LANG_LISTS_INDEX_OF_INPUT_IN_LIST);this.appendValueInput("FIND").appendTitle(Blockly.LANG_LISTS_INDEX_OF_TITLE_FIND).appendTitle(new Blockly.FieldDropdown(this.OPERATORS),"END").appendTitle(Blockly.LANG_LISTS_INDEX_OF_INPUT_OCCURRENCE);this.setInputsInline(true);this.setTooltip(Blockly.LANG_LISTS_INDEX_OF_TOOLTIP)}};Blockly.Language.lists_indexOf.OPERATORS=[[Blockly.LANG_LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.LANG_LISTS_INDEX_OF_LAST,"LAST"]];Blockly.Language.lists_getIndex={helpUrl:Blockly.LANG_LISTS_GET_INDEX_HELPURL,init:function(){this.setColour(210);var b=new Blockly.FieldDropdown(this.MODE,function(c){var d=(c=="REMOVE");this.sourceBlock_.updateStatement(d)});this.appendValueInput("VALUE").setCheck(Array).appendTitle(Blockly.LANG_LISTS_GET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendTitle(b,"MODE").appendTitle("");this.appendDummyInput("AT");this.setInputsInline(true);this.setOutput(true,null);this.updateAt(true);var a=this;this.setTooltip(function(){var c=a.getTitleValue("MODE")+"_"+a.getTitleValue("WHERE");return Blockly["LANG_LISTS_GET_INDEX_TOOLTIP_"+c]})},mutationToDom:function(){var a=document.createElement("mutation");var c=!this.outputConnection;a.setAttribute("statement",c);var b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){var c=(a.getAttribute("statement")=="true");this.updateStatement(c);var b=(a.getAttribute("at")!="false");this.updateAt(b)},updateStatement:function(a){var b=!this.outputConnection;if(a!=b){this.unplug(true,true);if(a){this.setOutput(false);this.setPreviousStatement(true);this.setNextStatement(true)}else{this.setPreviousStatement(false);this.setNextStatement(false);this.setOutput(true)}}},updateAt:function(a){this.removeInput("AT");if(a){this.appendValueInput("AT").setCheck(Number)}else{this.appendDummyInput("AT")}var b=new Blockly.FieldDropdown(this.WHERE,function(d){var c=(d=="FROM_START")||(d=="FROM_END");if(c!=a){var e=this.sourceBlock_;e.updateAt(c);e.setTitleValue(d,"WHERE");return null}return undefined});this.getInput("AT").appendTitle(b,"WHERE")}};Blockly.Language.lists_getIndex.MODE=[[Blockly.LANG_LISTS_GET_INDEX_GET,"GET"],[Blockly.LANG_LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Blockly.LANG_LISTS_GET_INDEX_REMOVE,"REMOVE"]];Blockly.Language.lists_getIndex.WHERE=[[Blockly.LANG_LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.LANG_LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.LANG_LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.LANG_LISTS_GET_INDEX_LAST,"LAST"],[Blockly.LANG_LISTS_GET_INDEX_RANDOM,"RANDOM"]];Blockly.Language.lists_setIndex={helpUrl:Blockly.LANG_LISTS_SET_INDEX_HELPURL,init:function(){this.setColour(210);this.appendValueInput("LIST").setCheck(Array).appendTitle(Blockly.LANG_LISTS_SET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendTitle(new Blockly.FieldDropdown(this.MODE),"MODE").appendTitle("");this.appendDummyInput("AT");this.appendValueInput("TO").appendTitle(Blockly.LANG_LISTS_SET_INDEX_INPUT_TO);this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_LISTS_SET_INDEX_TOOLTIP);this.updateAt(true);var a=this;this.setTooltip(function(){var b=a.getTitleValue("MODE")+"_"+a.getTitleValue("WHERE");return Blockly["LANG_LISTS_SET_INDEX_TOOLTIP_"+b]})},mutationToDom:function(){var a=document.createElement("mutation");var b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){var b=(a.getAttribute("at")!="false");this.updateAt(b)},updateAt:function(a){this.removeInput("AT");if(a){this.appendValueInput("AT").setCheck(Number)}else{this.appendDummyInput("AT")}var b=new Blockly.FieldDropdown(this.WHERE,function(d){var c=(d=="FROM_START")||(d=="FROM_END");if(c!=a){var e=this.sourceBlock_;e.updateAt(c);e.setTitleValue(d,"WHERE");return null}return undefined});this.moveInputBefore("AT","TO");this.getInput("AT").appendTitle(b,"WHERE")}};Blockly.Language.lists_setIndex.MODE=[[Blockly.LANG_LISTS_SET_INDEX_SET,"SET"],[Blockly.LANG_LISTS_SET_INDEX_INSERT,"INSERT"]];Blockly.Language.lists_setIndex.WHERE=Blockly.Language.lists_getIndex.WHERE;